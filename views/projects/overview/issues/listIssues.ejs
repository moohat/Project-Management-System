<% include ../../../../views/partials/header %> <% include
../../overview/overview_partials/header %>

<div class="container">
  <br />
  <h1>Issues</h1>

  <hr />
  <h2>Filters</h2>
  <br />
  <form action="" method="GET">
    <input type="hidden" name="page" value="1" />
    <!--       id        -->
    <div class="container col-sm-10">
      <div class="form-group row">
        <label for="id" class="col-sm-2 col-form-label"
          ><input type="checkbox" name="check_id" /> Issue ID</label
        >
        <div class="col-sm-6">
          <input
            type="text"
            class="form-control"
            id="id"
            placeholder="id"
            name="id"
          />
        </div>
      </div>
      <!--       name        -->
      <div class="form-group row">
        <label for="name" class="col-sm-2 col-form-label"
          ><input type="checkbox" name="check_subject" /> Subject</label
        >
        <div class="col-sm-6">
          <input
            type="text"
            class="form-control"
            id="subject"
            placeholder="subject"
            name="subject"
          />
        </div>
      </div>
      <!--       Tracker        -->
      <div class="form-group row">
        <label for="boolean" class="col-sm-2 col-form-label"
          ><input type="checkbox" name="check_tracker" /> Tracker</label
        >
        <div class="col-sm-6">
          <select id="boolean" class="form-control" value="">
            <option disabled selected>Choose the Tracker ...</option>
            <option>Bug</option>
            <option>Feature</option>
            <option>Support</option>
          </select>
        </div>
      </div>

      <!--       Done(%)        -->
      <div class="form-group row">
        <label for="boolean" class="col-sm-2 col-form-label"
          ><input type="checkbox" name="check_tracker" /> Done (%)</label
        >
        <div class="col-sm-6">
          <select id="boolean" class="form-control" value="">
            <option disabled selected>Choose the Tracker ...</option>
            <% for(let i = 0; i<= 100; i+=10){ %>
            <option><%= i %></option>

            <% } %>
          </select>
        </div>
      </div>

      <div class="form-group row">
        <div class="col-sm-10">
          <button type="submit" name="button" class="btn btn-primary">
            Search
          </button>
          <a href="/" class="btn btn-warning">Reset</a>
        </div>
      </div>
    </div>
  </form>
  <!---->
  <h2><i class="fas fa-columns"></i> Options</h2>
  <form action="" method="POST">
    <div class="form-group row">
      <div class="col-sm-2">Column</div>
      <div class="col-sm-3">
        <div class="row">
          <div class="col">
            <!-- 1 ST  COLUMN -->
            <!-- OPTIONS CHOICES -->
            <div class="form-group col-sm-2">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  name="oprojectid"
                  value="true"
                />
                <label class="form-check-label" for="projectid">
                  ID
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  name="oname"
                  value="true"
                />
                <label class="form-check-label" for="name">
                  Tracker
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  name="member"
                  value="true"
                />
                <label class="form-check-label" for="member">
                  Subject
                </label>
              </div>
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  name="member"
                  value="true"
                />
                <label class="form-check-label" for="member">
                  Description
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button type="submit" class="btn btn-primary">
      <i class="fas fa-check-circle"></i> Apply
    </button>
  </form>
  <br />

  <div class="table-responsive">
    <table class="table table-stripped">
      <thead class="thead-dark">
        <tr>
          <th>ID</th>
          <th>Tracker</th>
          <th>Subject</th>
          <th>Description</th>
          <th>Status</th>
  
          <th>Priority</th>
          <th>Assignee</th>
          <th>Start Date</th>
          <th>Due Date</th>
          <th>Estimated Time (hours)</th>
  
          <th>Done (%)</th>
          <th>File</th>
          <th>Spent Time (hours)</th>
          <th>Target Version</th>
          <th>Author</th>
  
          <th>Created Date</th>
          <th>Updated Date</th>
          <th>Closed Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <% if (issues.length > 0) { %>
        <% issues.forEach((item, index)=>{ %>
        <tr>
          <td><%= item.issueid %></td>
          <td><%= item.tracker %></td>
          <td><%= item.subject %></td>
          <td><%= item.description %></td>
          <td><%= item.status %></td>
          <td><%= item.priority %></td>
          <td><%= item.assignee %></td>
          <td><%= moment(item.startdate).format('LL') %></td>
          <td><%= moment(item.duedate).format('LL') %></td>
          <td><%= item.estimatedtime %></td>
          <td><%= item.done %></td>
          <td><a href="/images/<%= item.files %>"><%= item.files == 'null' ? 'disabled' : '' %> <i class="fa fa-download fa-2x"></i> </button> </a> </td>
          <td><%= item.spenttime %></td>
          <td><%= item.targetversion %></td>
          <td><%= item.author %></td>
          <td><%= item.createddate %></td>
          <td><%= item.updateddate %></td>
          <td><%= item.closeddate %></td>
          <td>
             <a href="/projects/issues/<%= item.projectid %>/<%=item.issueid%>/edit" class="btn btn-success"><i class="fa fa-edit"></i> Edit</a>
            <a href="/projects/issues/<%= item.projectid %>/<%= item.issueid %>/delete" class="btn btn-danger"><i class="fa fa-trash"></i> Delete</a>
          </td>
        </tr>
        <% })%>
        <% } else{ %>
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
          There's no issues yet
          <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <% } %>
      </tbody>
    </table>
  </div>

  <!--PAGINATION-->
  <br />
  <nav aria-label="Page navigation example">
    <ul class="pagination">
      <li class="page-item"><a class="page-link" href="#">Previous</a></li>
      <li class="page-item"><a class="page-link" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item"><a class="page-link" href="#">3</a></li>
      <li class="page-item"><a class="page-link" href="#">Next</a></li>
    </ul>
  </nav>

  <br />

  <div class="form-group row">
    <a href="/projects/issues/<%= data[0].projectid%>/add"><button type="button" class="btn btn-primary">add</button></a>
  </div>
</div>

<%- include ../../../../views/partials/footer %> <% include
../../overview/overview_partials/footer %>
